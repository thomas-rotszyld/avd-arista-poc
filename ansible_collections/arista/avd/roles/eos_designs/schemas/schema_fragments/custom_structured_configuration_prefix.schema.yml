# Copyright (c) 2023 Arista Networks, Inc.
# Use of this source code is governed by the Apache License 2.0
# that can be found in the LICENSE file.
# yaml-language-server: $schema=../../../../plugins/plugin_utils/schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  custom_structured_configuration_prefix:
    documentation_options:
      table: custom-structured-configuration
    type: list
    convert_types:
      - str
    items:
      type: str
    description: |
      Custom EOS Structured Configuration keys can be set on any group or host_var level using the name
      of the corresponding `eos_cli_config_gen` key prefixed with content of `custom_structured_configuration_prefix`.

      The content of Custom Structured Configuration variables will be merged with the structured config generated by the eos_designs role.

      The merge is done recursively, so it is possible to update a sub-key of a variable set by `eos_designs` role already.

      The merge follow these recursive merge strategies:
      - New keys will be added for all types.
      - Existing keys of type "List" with a "Primary key" set in the schema:
        - Strategy can be changed with `custom_structured_configuration_list_merge`. Default strategy:
          - Existing list items with the same "Primary key"-value will be updated.
          - New unique items will be appended to the existing list
      - Other keys of type "List" will have new unique items appended the the existing list.
      - Existing keys of type "Dictionary" will recursively merge
      - Other existing keys will be replaced.
    default: ["custom_structured_configuration_"]
